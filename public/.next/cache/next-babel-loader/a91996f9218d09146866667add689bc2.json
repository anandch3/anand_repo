{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/public/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ubuntu/public/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport Link from 'next/link';\nimport { API_BASE_URL } from '../../../../config';\nimport { useRouter } from 'next/router';\nimport $ from \"jquery\";\n\nvar Categoryproducts = function Categoryproducts() {\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useState = useState([]),\n      categories = _useState[0],\n      setCategories = _useState[1];\n\n  var _useState2 = useState([]),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _useState3 = useState([]),\n      products = _useState3[0],\n      setProducts = _useState3[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var categoryId;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            categoryId = id;\n\n            if (categoryId != undefined) {\n              console.log(categoryId);\n              getCategories(categoryId);\n              getActiveProducts(categoryId);\n            }\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [id]);\n  useEffect(function () {}, [products]);\n\n  var _useState4 = useState('0'),\n      cartItemCount = _useState4[0],\n      setCartItemCount = _useState4[1];\n\n  useEffect(function () {\n    getCartCount();\n  }, []);\n\n  var getCartCount = function getCartCount() {\n    var cartProducts = JSON.parse(localStorage.getItem('cart') || \"[]\");\n    var cartProductsCount = cartProducts.length;\n    setCartItemCount(cartProductsCount);\n  };\n\n  useEffect(function () {}, [cartItemCount]);\n\n  var getCategories = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var getCategories, categoriesGot, _category, i, tempProductId;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get(\"\".concat(API_BASE_URL, \"category/active\"));\n\n            case 2:\n              getCategories = _context2.sent;\n\n              if (getCategories.status === 200) {\n                _category = [];\n                categoriesGot = getCategories.data.categories;\n\n                for (i = 0; i < categoriesGot.length; i++) {\n                  tempProductId = categoriesGot[i]._id;\n\n                  if (id === tempProductId) {\n                    _category.push(categoriesGot[i]);\n                  }\n                }\n\n                console.log(_category);\n\n                if (_category.length != 0) {\n                  setCategory(_category[0]);\n                }\n              }\n\n              setCategories(categoriesGot);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getCategories() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    console.log(categories);\n  }, [categories]);\n  useEffect(function () {\n    console.log(category);\n  }, [category]);\n\n  var addThisToCart = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pid) {\n      var cartItems, priceSlabId, cartItemData, updateCart, categoryId, currentItems, checkIfItemExist;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n              priceSlabId = $('#priceSlab' + pid).val();\n              cartItemData = {\n                _id: pid,\n                priceslab_id: priceSlabId\n              };\n              updateCart = [];\n              categoryId = id;\n\n              if (cartItems.length === 0) {\n                updateCart.push(cartItemData);\n                localStorage.setItem('cart', JSON.stringify(updateCart));\n                getActiveProducts(categoryId);\n                getCartCount();\n              } else {\n                currentItems = cartItems;\n                checkIfItemExist = currentItems.findIndex(function (cartItem) {\n                  return cartItem._id === pid;\n                });\n\n                if (checkIfItemExist === -1) {\n                  currentItems.push(cartItemData);\n                  localStorage.setItem('cart', JSON.stringify(currentItems));\n                  getActiveProducts(categoryId);\n                  getCartCount();\n                } else {}\n              }\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function addThisToCart(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeThisToCart = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pid) {\n      var categoryId, cartItems, currentItems, itemIndex;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              categoryId = id;\n              cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n\n              if (cartItems.length != 0) {\n                currentItems = cartItems;\n                itemIndex = currentItems.findIndex(function (cartItem) {\n                  return cartItem._id === pid;\n                });\n                currentItems.splice(itemIndex, 1);\n                localStorage.setItem('cart', JSON.stringify(currentItems));\n                getActiveProducts(categoryId);\n                getCartCount();\n              }\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function removeThisToCart(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var setProductPackage = function setProductPackage(priceslab_id, product_id) {\n    $('#priceSlab' + product_id).val(priceslab_id);\n    var priceSlab = $('#priceSlab' + product_id).val();\n  };\n\n  var getActiveProducts = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(categoryId) {\n      var getProducts, loopProducts, i, tempProductId, cartItems, checkIfItemExist;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              console.log(categoryId);\n              _context5.next = 3;\n              return axios.get(\"\".concat(API_BASE_URL, \"product/active/category/\").concat(categoryId));\n\n            case 3:\n              getProducts = _context5.sent;\n              console.log(getProducts);\n\n              if (getProducts.status === 200) {\n                loopProducts = getProducts.data.products;\n\n                for (i = 0; i < loopProducts.length; i++) {\n                  tempProductId = loopProducts[i]._id;\n                  cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n\n                  if (cartItems.length != 0) {\n                    checkIfItemExist = cartItems.findIndex(function (cartItem) {\n                      return cartItem._id === tempProductId;\n                    });\n\n                    if (checkIfItemExist === -1) {\n                      loopProducts[i]['isAddedToCart'] = false;\n                    } else {\n                      loopProducts[i]['isAddedToCart'] = true;\n                    }\n                  } else {\n                    loopProducts[i]['isAddedToCart'] = false;\n                  }\n                }\n\n                setProducts(loopProducts);\n              }\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function getActiveProducts(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Country & Khadak\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"headerPages\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"headerMain\",\n        children: [/*#__PURE__*/_jsx(\"a\", {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"headerLogo\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"headerLogoImage\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: \"../../../images/logo.png\",\n                className: \"headerLogoImg\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"headerNav\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"headerNavMain\",\n            children: [categories.map(function (category, i) {\n              return /*#__PURE__*/_jsx(Link, {\n                href: \"/products/category/\".concat(category._id),\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingle\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"headerNavSingleInner\",\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: \"\".concat(API_BASE_URL).concat(category.image_url),\n                      className: \"headerNavSingleImg\"\n                    })\n                  })\n                })\n              }, category._id);\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/cart\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSingle\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingleInner\",\n                  children: /*#__PURE__*/_jsx(\"i\", {\n                    className: \"fas fa-cart-arrow-down headerNavSingleIco\"\n                  })\n                })\n              })\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSingle\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingleInner\",\n                  children: /*#__PURE__*/_jsx(\"i\", {\n                    className: \"fas fa-home headerNavSingleIco\"\n                  })\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"headerNavSearch\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"headerNavSearchMain\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSearchInput\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  className: \"headerNavSearchInputTxt\",\n                  placeholder: \"Enter Here To Search Products\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSearchButton\",\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"fas fa-arrow-right headerNavSearchButtonIco\"\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"pageContent\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pageContentInner\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"pageContentHeading\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"pageContentHeadingTxt\",\n            children: category.name\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"pageContentMain\",\n            children: /*#__PURE__*/_jsx(\"ul\", {\n              className: \"pageContentList\",\n              children: products.map(function (product, i) {\n                return /*#__PURE__*/_jsxs(\"li\", {\n                  className: \"pageContentListSingle\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"pageContentListSingleImage\",\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: \"\".concat(API_BASE_URL).concat(product.image_url),\n                      className: \"pageContentListSingleImg\"\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"pageContentListSingleDetails\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsHeading\",\n                      children: /*#__PURE__*/_jsx(\"p\", {\n                        className: \"pageContentListSingleDetailsHeadingTxt\",\n                        children: product.name\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsPriceslab\",\n                      children: /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"pageContentListSingleDetailsPriceslabInner\",\n                        children: [/*#__PURE__*/_jsx(\"select\", {\n                          onChange: function onChange(e) {\n                            setProductPackage(e.target.value, product._id);\n                          },\n                          className: \"pageContentListSingleDetailsPriceslabSelect\",\n                          children: product.priceslabs.map(function (prices, i) {\n                            return /*#__PURE__*/_jsxs(\"option\", {\n                              value: prices._id,\n                              children: [prices.name, \" - Rs \", prices.price]\n                            }, prices._id);\n                          })\n                        }), product.priceslabs.slice(0, 1).map(function (prices, i) {\n                          return /*#__PURE__*/_jsx(\"input\", {\n                            type: \"hidden\",\n                            id: \"priceSlab\".concat(product._id),\n                            value: prices._id\n                          }, prices._id);\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsAddToCart\",\n                      children: product.isAddedToCart === false ? /*#__PURE__*/_jsx(\"div\", {\n                        className: \"pageContentListSingleDetailsAddToCartButton\",\n                        onClick: function onClick(e) {\n                          addThisToCart(product._id);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \"pageContentListSingleDetailsAddToCartButtonTxt\",\n                          children: \"Add To Cart\"\n                        })\n                      }) : /*#__PURE__*/_jsx(\"div\", {\n                        className: \"pageContentListSingleDetailsAddToCartButton\",\n                        onClick: function onClick(e) {\n                          removeThisToCart(product._id);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \"pageContentListSingleDetailsAddToCartButtonTxt\",\n                          children: \"Remove From Cart\"\n                        })\n                      })\n                    })]\n                  })]\n                }, product._id);\n              })\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"our-vision\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"our-vision-inner\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"our-vision-indicator\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-indicator-inner\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"our-vision-indicator-text\",\n              children: \"Our Vision\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-indicator-quote\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: \"../../../images/quote.png\",\n              className: \"our-vision-indicator-quote-ico\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"our-vision-content\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-content-inner\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"our-vision-content-text\",\n              children: \"\\\"Country & Khadak\\u2019s vision and mission are no different. We are here to provide our customers with best quality mutton, chicken and fish not only satiate their tickling taste buds but also to ensure they are healthy and safe.\\\"\"\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"store-gallery\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-1.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-2.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-3.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-4.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"contact-us\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"contact-us-inner\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"contact-us-details\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"contact-us-details-inner\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"contact-us-details-left\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-left-heading\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-left-heading-text\",\n                  children: \"country & khadak\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-left-description\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-left-description-text\",\n                  children: \"Country & Khadak has commenced its services in Koramangala, Bengaluru from 27th Nov 2020. You can now taste your favourite Khadaknath in Namma City.\"\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"contact-us-details-contact\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-contact-heading\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-heading-text\",\n                  children: \"contact details\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"contact-us-details-contact-description\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-description-text\",\n                  children: \"+91 9108342799\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-description-text\",\n                  children: \"support@countryandkhadak.com\"\n                })]\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"contact-us-copyright-logo\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"contact-us-copyright-logo-inner\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"contact-us-logo\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-logo-inner\",\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  src: \"../../../images/logo.png\",\n                  className: \"contact-us-logo-img\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"contact-us-copyright\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: \"contact-us-copyright-text\",\n                children: \"Copyright \\xA9 2020. All Rights Reserved Country & Khadak.\"\n              })\n            })]\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"cartFavIcon\",\n      children: [cartItemCount != '0' ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"cartFavIconBubble\",\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \"cartFavIconBubbleTxt\",\n          children: cartItemCount\n        })\n      }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"cartFavIconInner\",\n          children: /*#__PURE__*/_jsx(\"i\", {\n            className: \"fas fa-cart-arrow-down cartFavIconIco\"\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default Categoryproducts;","map":null,"metadata":{},"sourceType":"module"}