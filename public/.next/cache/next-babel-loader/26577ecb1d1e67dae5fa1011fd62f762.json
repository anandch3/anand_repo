{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport Link from 'next/link';\nimport { API_BASE_URL } from '../../../../config';\nimport { useRouter } from 'next/router';\nimport $ from \"jquery\";\n\nconst Categoryproducts = () => {\n  const router = useRouter();\n  const {\n    id\n  } = router.query;\n  const {\n    0: categories,\n    1: setCategories\n  } = useState([]);\n  const {\n    0: category,\n    1: setCategory\n  } = useState([]);\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  useEffect(async () => {\n    const categoryId = id;\n\n    if (categoryId != undefined) {\n      console.log(categoryId);\n      getCategories(categoryId);\n      getActiveProducts(categoryId);\n    }\n  }, [id]);\n  useEffect(() => {}, [products]);\n  const {\n    0: cartItemCount,\n    1: setCartItemCount\n  } = useState('0');\n  useEffect(() => {\n    getCartCount();\n  }, []);\n\n  const getCartCount = () => {\n    const cartProducts = JSON.parse(localStorage.getItem('cart') || \"[]\");\n    const cartProductsCount = cartProducts.length;\n    setCartItemCount(cartProductsCount);\n  };\n\n  useEffect(() => {}, [cartItemCount]);\n\n  const getCategories = async () => {\n    let getCategories = await axios.get(`${API_BASE_URL}category/active`);\n    let categoriesGot;\n\n    if (getCategories.status === 200) {\n      let category = [];\n      categoriesGot = getCategories.data.categories;\n      var i;\n\n      for (i = 0; i < categoriesGot.length; i++) {\n        var tempProductId = categoriesGot[i]._id;\n\n        if (id === tempProductId) {\n          category.push(categoriesGot[i]);\n        }\n      }\n\n      console.log(category);\n\n      if (category.length != 0) {\n        setCategory(category[0]);\n      }\n    }\n\n    setCategories(categoriesGot);\n  };\n\n  useEffect(() => {\n    console.log(categories);\n  }, [categories]);\n  useEffect(() => {\n    console.log(category);\n  }, [category]);\n\n  const addThisToCart = async pid => {\n    const cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n    const priceSlabId = $('#priceSlab' + pid).val();\n    const cartItemData = {\n      _id: pid,\n      priceslab_id: priceSlabId\n    };\n    const updateCart = [];\n    const categoryId = id;\n\n    if (cartItems.length === 0) {\n      updateCart.push(cartItemData);\n      localStorage.setItem('cart', JSON.stringify(updateCart));\n      getActiveProducts(categoryId);\n      getCartCount();\n    } else {\n      const currentItems = cartItems;\n      const checkIfItemExist = currentItems.findIndex(cartItem => cartItem._id === pid);\n\n      if (checkIfItemExist === -1) {\n        currentItems.push(cartItemData);\n        localStorage.setItem('cart', JSON.stringify(currentItems));\n        getActiveProducts(categoryId);\n        getCartCount();\n      } else {}\n    }\n  };\n\n  const removeThisToCart = async pid => {\n    const categoryId = id;\n    const cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n\n    if (cartItems.length != 0) {\n      const currentItems = cartItems;\n      const itemIndex = currentItems.findIndex(cartItem => cartItem._id === pid);\n      currentItems.splice(itemIndex, 1);\n      localStorage.setItem('cart', JSON.stringify(currentItems));\n      getActiveProducts(categoryId);\n      getCartCount();\n    }\n  };\n\n  const setProductPackage = (priceslab_id, product_id) => {\n    $('#priceSlab' + product_id).val(priceslab_id);\n    const priceSlab = $('#priceSlab' + product_id).val();\n  };\n\n  const getActiveProducts = async function (categoryId) {\n    console.log(categoryId);\n    let getProducts = await axios.get(`${API_BASE_URL}product/active/category/${categoryId}`);\n    console.log(getProducts);\n\n    if (getProducts.status === 200) {\n      const loopProducts = getProducts.data.products;\n      var i;\n\n      for (i = 0; i < loopProducts.length; i++) {\n        var tempProductId = loopProducts[i]._id;\n        const cartItems = JSON.parse(localStorage.getItem('cart') || \"[]\");\n\n        if (cartItems.length != 0) {\n          const checkIfItemExist = cartItems.findIndex(cartItem => cartItem._id === tempProductId);\n\n          if (checkIfItemExist === -1) {\n            loopProducts[i]['isAddedToCart'] = false;\n          } else {\n            loopProducts[i]['isAddedToCart'] = true;\n          }\n        } else {\n          loopProducts[i]['isAddedToCart'] = false;\n        }\n      }\n\n      setProducts(loopProducts);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Country & Khadak\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"headerPages\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"headerMain\",\n        children: [/*#__PURE__*/_jsx(\"a\", {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"headerLogo\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"headerLogoImage\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: \"../../../images/logo.png\",\n                className: \"headerLogoImg\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"headerNav\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"headerNavMain\",\n            children: [categories.map(function (category, i) {\n              return /*#__PURE__*/_jsx(Link, {\n                href: `/products/category/${category._id}`,\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingle\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"headerNavSingleInner\",\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: `${API_BASE_URL}${category.image_url}`,\n                      className: \"headerNavSingleImg\"\n                    })\n                  })\n                })\n              }, category._id);\n            }), /*#__PURE__*/_jsx(Link, {\n              href: `/cart`,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSingle\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingleInner\",\n                  children: /*#__PURE__*/_jsx(\"i\", {\n                    className: \"fas fa-cart-arrow-down headerNavSingleIco\"\n                  })\n                })\n              })\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSingle\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"headerNavSingleInner\",\n                  children: /*#__PURE__*/_jsx(\"i\", {\n                    className: \"fas fa-home headerNavSingleIco\"\n                  })\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"headerNavSearch\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"headerNavSearchMain\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSearchInput\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  className: \"headerNavSearchInputTxt\",\n                  placeholder: \"Enter Here To Search Products\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"headerNavSearchButton\",\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"fas fa-arrow-right headerNavSearchButtonIco\"\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"pageContent\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pageContentInner\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"pageContentHeading\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"pageContentHeadingTxt\",\n            children: category.name\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"pageContentMain\",\n            children: /*#__PURE__*/_jsx(\"ul\", {\n              className: \"pageContentList\",\n              children: products.map(function (product, i) {\n                return /*#__PURE__*/_jsxs(\"li\", {\n                  className: \"pageContentListSingle\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"pageContentListSingleImage\",\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: `${API_BASE_URL}${product.image_url}`,\n                      className: \"pageContentListSingleImg\"\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"pageContentListSingleDetails\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsHeading\",\n                      children: /*#__PURE__*/_jsx(\"p\", {\n                        className: \"pageContentListSingleDetailsHeadingTxt\",\n                        children: product.name\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsPriceslab\",\n                      children: /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"pageContentListSingleDetailsPriceslabInner\",\n                        children: [/*#__PURE__*/_jsx(\"select\", {\n                          onChange: e => {\n                            setProductPackage(e.target.value, product._id);\n                          },\n                          className: \"pageContentListSingleDetailsPriceslabSelect\",\n                          children: product.priceslabs.map(function (prices, i) {\n                            return /*#__PURE__*/_jsxs(\"option\", {\n                              value: prices._id,\n                              children: [prices.name, \" - Rs \", prices.price]\n                            }, prices._id);\n                          })\n                        }), product.priceslabs.slice(0, 1).map(function (prices, i) {\n                          return /*#__PURE__*/_jsx(\"input\", {\n                            type: \"hidden\",\n                            id: `priceSlab${product._id}`,\n                            value: prices._id\n                          }, prices._id);\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"pageContentListSingleDetailsAddToCart\",\n                      children: product.isAddedToCart === false ? /*#__PURE__*/_jsx(\"div\", {\n                        className: \"pageContentListSingleDetailsAddToCartButton\",\n                        onClick: e => {\n                          addThisToCart(product._id);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \"pageContentListSingleDetailsAddToCartButtonTxt\",\n                          children: \"Add To Cart\"\n                        })\n                      }) : /*#__PURE__*/_jsx(\"div\", {\n                        className: \"pageContentListSingleDetailsAddToCartButton\",\n                        onClick: e => {\n                          removeThisToCart(product._id);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \"pageContentListSingleDetailsAddToCartButtonTxt\",\n                          children: \"Remove From Cart\"\n                        })\n                      })\n                    })]\n                  })]\n                }, product._id);\n              })\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"our-vision\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"our-vision-inner\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"our-vision-indicator\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-indicator-inner\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"our-vision-indicator-text\",\n              children: \"Our Vision\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-indicator-quote\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: \"../../../images/quote.png\",\n              className: \"our-vision-indicator-quote-ico\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"our-vision-content\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"our-vision-content-inner\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"our-vision-content-text\",\n              children: \"\\\"Country & Khadak\\u2019s vision and mission are no different. We are here to provide our customers with best quality mutton, chicken and fish not only satiate their tickling taste buds but also to ensure they are healthy and safe.\\\"\"\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"store-gallery\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-1.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-2.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-3.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"store-gallery-single\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"store-gallery-single-image\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"../../../images/shop-4.jpg\",\n            className: \"store-gallery-single-img\"\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"contact-us\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"contact-us-inner\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"contact-us-details\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"contact-us-details-inner\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"contact-us-details-left\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-left-heading\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-left-heading-text\",\n                  children: \"country & khadak\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-left-description\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-left-description-text\",\n                  children: \"Country & Khadak has commenced its services in Koramangala, Bengaluru from 27th Nov 2020. You can now taste your favourite Khadaknath in Namma City.\"\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"contact-us-details-contact\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-details-contact-heading\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-heading-text\",\n                  children: \"contact details\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"contact-us-details-contact-description\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-description-text\",\n                  children: \"+91 9108342799\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"contact-us-details-contact-description-text\",\n                  children: \"support@countryandkhadak.com\"\n                })]\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"contact-us-copyright-logo\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"contact-us-copyright-logo-inner\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"contact-us-logo\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"contact-us-logo-inner\",\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  src: \"../../../images/logo.png\",\n                  className: \"contact-us-logo-img\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"contact-us-copyright\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: \"contact-us-copyright-text\",\n                children: \"Copyright \\xA9 2020. All Rights Reserved Country & Khadak.\"\n              })\n            })]\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"cartFavIcon\",\n      children: [cartItemCount != '0' ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"cartFavIconBubble\",\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \"cartFavIconBubbleTxt\",\n          children: cartItemCount\n        })\n      }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"cartFavIconInner\",\n          children: /*#__PURE__*/_jsx(\"i\", {\n            className: \"fas fa-cart-arrow-down cartFavIconIco\"\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default Categoryproducts;","map":null,"metadata":{},"sourceType":"module"}